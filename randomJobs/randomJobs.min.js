javascript:(function(){const g=[{},{}],k=g.map(a=>new h(a)),m={celsiusToFahrenheit:a=>1.8*a+32,feetToMeters:a=>.3048*a,milesToMeters:a=>1609.344*a,metersToMiles:a=>a/1609.344,kmToNm:a=>a/1.852,nmToKm:a=>1.852*a,inhgToKpa:a=>a/.29529988,kpaToInhg:a=>.29529988*a,kphToMps:a=>a/3600*1E3,mpsToKts:a=>1.9438445*a,ktsToMps:a=>a/1.9438445};function n(a,b={},c=""){const d=document.createElement(a);Object.keys(b).forEach(e=>d.setAttribute(e,b[e]));(""+c).length&&(d.innerHTML=c);return d}function p(a,b,c={},d=-1){b=n(b,c);0>d?a.appendChild(b):a.insertBefore(b,a.children[d]);return b}function q(a){return function(b=1,c=0){let d=a+=1831565813;d=Math.imul(d^d>>>15,d|1);d^=d+Math.imul(d^d>>>7,d|61);return((d^d>>>14)>>>0)/4294967296*b+c}}function r(){return Math.floor(new Date/1E3)}function h(a){this.index=new Map;this.aList=a;this.int=b=>parseInt(Math.floor(b))}h.prototype.addPoint=function(a,b,c){b=this.int(b);c=this.int(c);-180>c?c+=360:180<c&&(c-=360);this.index.has(b)||this.index.set(b,new Map);this.index.get(b).has(c)||this.index.get(b).set(c,new Set);this.index.get(b).get(c).add(a)};h.prototype.nearbyIcao=function(a,b){return this.nearby(this.aList[a],b)};h.prototype.nearby=function(a,b){if(!a)return[];var c=9E-6*b;c=[[this.int(a[0]-c),this.int(a[0]+c)],[this.int(a[1]-c),this.int(a[1]+c)]];let d=new Set;for(let e=c[0][0];e<=c[0][1];e++)for(let f=c[1][0];f<=c[1][1];f++){let l=f;-180>f?l+=360:180<f&&(l-=360);this.index.has(e)&&this.index.get(e).has(l)&&(d=d.union(this.index.get(e).get(l)))}return[...d].filter(e=>this.dist(...a,...this.aList[e])<=b).sort((e,f)=>this.distSq(...a,...this.aList[e])-this.distSq(...a,...this.aList[f]))};h.prototype.distSq=function(a,b,c,d){a=c-a;b=d-b;return a*a+b*b};h.prototype.dist=function(a,b,c,d){return geofs.api.map._map.distance({lat:a,lng:b},{lat:c,lng:d})};const t={};function u(a){void 0===localStorage&&(localStorage={setItem:()=>{},getItem:()=>{}});const b=localStorage.getItem(a);if(void 0!==b)try{t[a]=JSON.parse(b)}catch(d){}t[a]||(t[a]={});const c=t[a];this.has=d=>void 0!==c[d];this.get=d=>c[d];this.set=(d,e)=>{c[d]=e;localStorage.setItem(a,JSON.stringify(c))};this.del=d=>{delete c[d];localStorage.setItem(a,JSON.stringify(c))}};(function v(){if(!geofs||!geofs.map||!geofs.map.addRunwayMarker)return setTimeout(v,10);const b=geofs.map.addRunwayMarker;geofs.map.addRunwayMarker=function(c){w(c);return b(c)}})();function w(a){const [,b,c]=a.name.split("|");if(c&&c.length){const d=a.major?1:0;let e=g[d][c];if(void 0===e)e=[a.lat,a.lon,b];else{const [f,l,x]=e;e=[(f+a.lat)/2,(l+a.lon)/2,x||b]}g[d][c]=e}};function y(a,b,c){this.version=c;this.aList=a;this.aIndex=b;this.window=null;this.store=new u("randomJobsV1");this.aHandler=new z(this);this.flight=new A(this);this.currentAirportMajor=this.currentAirport=null;this.currentAirportJobs=[];this.currentAirportMaxJobs=[5,5];this.rng=q((new Date).getHours())}y.prototype.init=function(a,b){Object.keys(g[0]).length||["major","minor"].forEach(c=>Object.values(geofs.api.map.markerLayers[c].tiles).forEach(d=>{d.forEach(e=>{e&&e.runway&&w(e.runway)})}));this.aList.forEach((c,d)=>Object.keys(c).forEach(e=>this.aIndex[d].addPoint(e,...c[e])));$.getJSON(`${"https://raw.githubusercontent.com/scitor/GeoFS/master"}/icaos.json?${r()}`,c=>{c.forEach(d=>g.push(d));this.aHandler.init();setInterval(()=>this.update(),5E3);b()})};y.prototype.update=function(){const a=geofs.aircraft.instance.getCurrentCoordinates(),[b,c]=this.aHandler.updateCurrentAirport(a);this.currentAirport=b;this.currentAirportMajor=c;b!=this._lastUpdateIcao&&((this._lastUpdateIcao=b)?(this.rng=q(this.aHandler.getIcaoId(b)+(new Date).getHours()),this.currentAirportMaxJobs=[30,70].map(d=>Math.round(this.rng(d,5)))):(this.aList.hearbyCache={},this.currentAirportJobs=[]))};y.prototype.chance=function(a){return this.rng()<(1<a?a/100:a)};y.prototype.randomEl=function(a){return a[Math.floor(this.rng()*a.length)]};y.prototype.rngWorth=function(a,b,c){return Math.round(this.rng(b,c)*a/100)};y.prototype.hasJob=function(a,b,c){return this.currentAirportJobs.find(d=>d.dept==a&&d.dest==b&&d.airline==c)};y.prototype.getJobObj=function(a,b,c){let d=!0;if(c){var e=this.aHandler.getAInfo(c);d=!1;e=(e.iata||e.icao)+Math.round(100+Math.sqrt(this.rng(1E6)))}else c=String.fromCharCode(Math.round(this.rng(25,65))),e=c+Math.round(Math.sqrt(this.rng(1E4)));return{dept:a,dest:b,flight:e,airline:c,regional:d,dist:this.aHandler.getAirportDist(a,b)}};y.prototype.getJobsList=function(){return[...this.currentAirportJobs]};y.prototype.sortJobsList=function(a){this.currentAirportJobs.sort(a)};y.prototype.generateJob=function(){if(this.currentAirport){var a=this.generateAirlineJob()||this.generateRegionalJob();if(a)return this.currentAirportJobs.push(a),!0}};y.prototype.generateAirlineJob=function(){if(!(this.currentAirportJobs.filter(c=>!c.regional).length>this.currentAirportMaxJobs[0])){var a,b=this.aList[4][this.aList[2].indexOf(this.currentAirport)];b&&Object.keys(b).find(c=>b[c].find(d=>{if(!this.hasJob(this.currentAirport,this.aList[2][c],this.aList[3][d].split("|")[0]))return a=this.getJobObj(this.currentAirport,this.aList[2][c],this.aList[3][d].split("|")[0]),a.worth=this.rngWorth(a.dist,2,4),!0}));return a}};y.prototype.generateRegionalJob=function(){if(!(this.currentAirportJobs.filter(l=>l.regional).length>this.currentAirportMaxJobs[1])){var a=geofs.aircraft.instance.getCurrentCoordinates();if(this.currentAirportMajor){var b=1E5;for(var c=0;10>c;c++){b+=1E5*c;var d=this.aHandler.getNearbyAirports(a,m.nmToKm(b)),e=d[1].indexOf(this.currentAirport);-1<e&&d[1].splice(e,1);if(d[1].length&&this.chance(1/3)){var f=this.getJobObj(this.currentAirport,this.randomEl(d[1]));f.worth=this.rngWorth(f.dist,2,3)}!f&&d[0].length&&this.chance(1/3)&&(f=this.getJobObj(this.currentAirport,this.randomEl(d[0])),f.worth=this.rngWorth(f.dist,2,4));if(f)return f}}else for(b=1E5,c=0;5>c;c++)if(b+=1E5*c,d=this.aHandler.getNearbyAirports(a,m.nmToKm(b)),e=d[0].indexOf(this.currentAirport),-1<e&&d[0].splice(e,1),d[0].length&&this.chance(1/3)&&(f=this.getJobObj(this.currentAirport,this.randomEl(d[0])),f.worth=this.rngWorth(f.dist,2,5)),!f&&d[1].length&&(f=this.getJobObj(this.currentAirport,this.randomEl(d[1])),f.worth=this.rngWorth(f.dist,2,4)),f)return f}};function z(a){this.jobMngr=a;this.aIndex=a.aIndex;this.aList=a.aList;this.hearbyCache={};this.aInfo={}}z.prototype.init=function(){this.aList[3].forEach((a,b)=>{const [c,d,e]=a.split("|");this.aInfo[c]={id:b,iata:d,icao:c,name:e}})};z.prototype.hasAIcon=function(a){return this.aList[7][a[0]]&&this.aList[7][a[0]][a[1]]&&this.aList[7][a[0]][a[1]][a[2]]};z.prototype.getAInfo=function(a){return 1==a.length?{icao:a,iata:a,name:this.getRegionalsName(a)}:this.aInfo[a]};z.prototype.getIcaoId=function(a){if(!a||!a.length)return 0;const b=this.aList[2].indexOf(a);return-1==b?(this.aList[2].push(a),this.aList[2].length-1):b};z.prototype.getListStr=function(a){return 0===a?"":this.aList[5][a]};z.prototype.updateCurrentAirport=function(a){const b=[0,1].map(c=>this.aIndex[c].nearby([a[0],a[1]],5E3)[0]);if(b[0]&&b[1]){const c=b.map((d,e)=>this.aList[e][d]);return this.aIndex[0].dist(...a,...c[0])<this.aIndex[1].dist(...a,...c[1])?[b[0],0]:[b[1],1]}return b[0]?[b[0],0]:b[1]?[b[1],1]:[null,null]};z.prototype.getNearbyAirports=function(a,b){void 0===this.hearbyCache[b]&&(this.hearbyCache[b]=[0,1].map(c=>this.aIndex[c].nearby([a[0],a[1]],b)));return this.hearbyCache[b]};z.prototype.fetchAirportWeather=function(a,b){void 0!==window.METAR?b(window.METAR[a]):b()};z.prototype.getAirportDist=function(a,b){try{return this.aIndex[0].dist(...this.getAirportCoords(a),...this.getAirportCoords(b))}catch(c){return console.log(a,b,c),0}};z.prototype.getAirportCoords=function(a){if(this.aList[0][a])return[this.aList[0][a][0],this.aList[0][a][1]];if(this.aList[1][a])return[this.aList[1][a][0],this.aList[1][a][1]]};z.prototype.getAirportName=function(a){if(this.aList[0][a])return this.aList[0][a][2];if(this.aList[1][a])return this.aList[1][a][2]};z.prototype.getAirportInfo=function(a){const b={elevation:"",iata:"",country:"",state:"",city:"",name:"",tz:""},c=this.aList[2].indexOf(a);return-1!=c&&this.aList[6][c]?"elevation iata country state city name tz".split(" ").reduce((d,e,f)=>{d[e]="elevation"==e?this.aList[6][c][f]:this.getListStr(this.aList[6][c][f]);return d},b):b};z.prototype.getRegionalsName=function(a){return{A:"Aerofleet Airways",B:"BlueWave Airlines",C:"Cloudline Aviation",D:"DreamSky Airlines",E:"Eclipse Air",F:"Freedom Flyers",G:"Galaxy Wings",H:"Horizon Vista Airways",I:"Infinity Airlines",J:"Jetstream Airways",K:"Keystone Airlines",L:"Luminary Airlines",M:"Meridian Air",N:"Northern Lights Air",O:"Odyssey Air",P:"Phoenix Wings",Q:"Quantum Air",R:"Radiant Airlines",S:"SkyBound Airlines",T:"TranquilAirways",U:"Uplift Airlines",V:"Vortex Skyways",W:"Windward Jet",X:"Xenon Air",Y:"Yonder Airways",Z:"Zenith Sky"}[a.toLocaleUpperCase()]};const B={PLANING:"planing",DEPARTURE:"departure",AIRBORNE:"airborne",ARRIVAL:"arrival",ABORTED:"aborted",FINISHED:"finished"};function A(a){this.jobMngr=a;this.store=a.store}A.prototype.clearCurrent=function(){return this.store.del("currentFlight")};A.prototype.getCurrent=function(){return this.store.get("currentFlight")};A.prototype.setCurrent=function(a){const b=c=>this.jobMngr.aHandler.getIcaoId(c);a.id||(a.id=b(a.dept)+""+b(a.dest)+r());return this.store.set("currentFlight",a)};function C(a){this.jobMngr=a;a.window=this;this._lastUpdateIcao="INIT"}C.prototype.init=function(){$.get(`${"https://raw.githubusercontent.com/scitor/GeoFS/master"}/randomJobs/styles.css?${r()}`,b=>{document.head.appendChild(n("style",{type:"text/css"},b))});$.get(`${"https://raw.githubusercontent.com/scitor/GeoFS/master"}/randomJobs/flags16.css?${r()}`,b=>{document.head.appendChild(n("style",{type:"text/css"},b))});const a=$(".geofs-ui-right")[0];this.ctrlPadDom=p(a,"div",{class:"jobs-pad"},1);this.ctrlPadDom.onclick=b=>this.toggleWindow(b);this.padLabelDom=p(this.ctrlPadDom,"div",{class:"control-pad-label transp-pad"});this.padLabelDom.innerHTML="JOBS";this.jobsWindowDom=p(this.ctrlPadDom,"div",{class:"jobs-window"});this.jobsWindowDom.innerHTML='<p style="text-align:center;">... initializing ...</p>';$.get(`${"https://raw.githubusercontent.com/scitor/GeoFS/master"}/randomJobs/window.html?${r()}`,b=>{this.populate(b);setInterval(()=>this.update(),1E3)})};C.prototype.populate=function(a){this.jobsWindowDom.innerHTML=a;this.headerDom={title:this.jobsWindowDom.querySelector(".jobs-title"),locinfo:this.jobsWindowDom.querySelector(".locinfo"),coords:this.jobsWindowDom.querySelector(".coords"),metar:this.jobsWindowDom.querySelector(".metar")};this.footerDom=this.jobsWindowDom.querySelector(".jobs-footer");this.footerDom.innerHTML="Random Jobs v"+this.jobMngr.version;this.mainMenuDom=this.jobsWindowDom.querySelector(".jobs-menu");this.mainMenuDom.onclick=b=>this.handleMainMenu(b);this.contentDom=this.jobsWindowDom.querySelector(".jobs-content");this.jobsPage=new D(this);this.jobsPage.populate(this.contentDom.querySelector(".list-jobs"));this.flightPage=new E(this);this.flightPage.populate(this.contentDom.querySelector(".list-flight"));this.headerDom.metar.onclick=()=>this.windyPopup();this.populated=!0};C.prototype.windyPopup=function(){var a=this.jobMngr.currentAirport;a&&(a=this.jobMngr.aHandler.getAirportCoords(a))&&window.open("https://embed.windy.com/embed.html?type=map&location=coordinates&zoom=7&lat="+a[0]+"&lon="+a[1],"_blank","popup=1",!1)};C.prototype.toggleWindow=function(a){a.target==this.ctrlPadDom&&(this.padLabelDom.classList.contains("blue-pad")?(this.padLabelDom.classList.remove("blue-pad"),this.jobsWindowDom.style.right="-500px"):(this.padLabelDom.classList.add("blue-pad"),this.jobsWindowDom.style.right="80px"))};C.prototype.handleMainMenu=function(a){const b=a.target.innerHTML;this.contentDom.querySelectorAll(":scope > div").forEach(c=>{const d=c.classList.contains("list-"+b.toLocaleLowerCase());c.style.display=d?"":"none"});this.mainMenuDom.querySelectorAll("ul > li").forEach(c=>{c.innerHTML==b?c.classList.add("active"):c.classList.remove("active")});this._activeMenu=b.toLocaleLowerCase();switch(b.toLocaleLowerCase()){case "jobs":this.jobsPage.reloadList();break;case "flight":this.flightPage.updateForm()}};C.prototype.update=function(){this.populated&&(this.updateHeader(),"flight"==this._activeMenu&&this.flightPage.refreshDisplays())};C.prototype.updateHeader=function(){const a=this.headerDom,b=this.jobMngr.currentAirport;if(b!=this._lastUpdateIcao)if(this._lastUpdateIcao=b){const d=this.jobMngr.aHandler.getAirportInfo(b);var c=this.jobMngr.aHandler.getAirportName(b)||d.name;a.title.innerHTML=c.replace(" International "," Intl. ").replace(/ Airport$/,"");c=b;d.iata&&(c+=" ("+d.iata+")");d.city&&(c+=", "+d.city);d.state&&(c+=", "+d.state);d.country&&(c=n("a",{class:"flag "+d.country.toLowerCase(),title:d.country}).outerHTML+c);a.locinfo.innerHTML=c;c=this.jobMngr.aHandler.getAirportCoords(b);a.coords.innerHTML="Coords "+c.map(e=>e.toFixed(4)).join(", ");a.coords.innerHTML+=", Elevation "+d.elevation+" ft";a.metar.innerHTML="METAR: receiving ...";this.jobMngr.aHandler.fetchAirportWeather(b,e=>{if(e&&e.METAR){a.metar.innerHTML="METAR:";const f=Object.keys(e).map(l=>l+":"+e[l]).join("\n");a.metar.appendChild(n("a",{title:f},e.METAR));e.altimHg&&(a.coords.innerHTML+=", inHg:"+e.altimHg);e.fltCat&&(a.coords.innerHTML+=" ("+e.fltCat+")")}else a.metar.innerHTML="METAR: INOP"})}else a.title.innerHTML="... no airport nearby ...",a.locinfo.innerHTML="",a.coords.innerHTML="",a.metar.innerHTML=""};function D(a){this.jobsWindow=a;this.jobMngr=a.jobMngr}D.prototype.populate=function(a){this.dom={listHeader:a.querySelector("div"),list:a.querySelector("ul"),loadButton:a.querySelector("input")};this.dom.loadButton.onclick=()=>this.loadJobs();this.dom.listHeader.onclick=b=>this.sortList(b)};D.prototype.loadJobs=function(){for(let a=0;a<this.jobMngr.rng(10,10);++a)this.jobMngr.generateJob();this.reloadList()};D.prototype.sortList=function(a){a=a.target;let b=()=>{};this._lastSort=!this._lastSort;b=a==this.dom.listHeader.children[0]?(c,d)=>c.regional-d.regional||(this._lastSort?c.flight.localeCompare(d.flight):d.flight.localeCompare(c.flight)):a==this.dom.listHeader.children[1]?(c,d)=>c.regional-d.regional||(this._lastSort?c.dest.localeCompare(d.dest):d.dest.localeCompare(c.dest)):(c,d)=>c.regional-d.regional||(this._lastSort?d.dist-c.dist:c.dist-d.dist);this.jobMngr.sortJobsList(b);this.reloadList()};D.prototype.reloadList=function(){this.dom.list.innerHTML="";this.jobMngr.getJobsList().forEach(a=>{var b=p(this.dom.list,"li",{class:"job-entry-available"}),c="https://raw.githubusercontent.com/scitor/GeoFS/master/randomJobs/airline.png";a.regional?c="https://raw.githubusercontent.com/scitor/GeoFS/master/randomJobs/regional.png":this.jobMngr.aHandler.hasAIcon(a.airline)&&(c=`https://www.flightaware.com/images/airline_logos/24px/${a.airline}.png`);const d=p(b,"div",{class:"flight"}),e=this.jobMngr.aHandler.getAInfo(a.airline);p(d,"img",{src:c,alt:e.name,title:e.name,referrerpolicy:"no-referrer"});d.appendChild(n("span",{},a.flight));b.appendChild(n("div",{class:"dest"},a.dest));b.appendChild(n("div",{class:"dist"},Math.round(m.kmToNm(a.dist/1E3))));b=p(b,"div",{class:"actions"});c=p(b,"button",{class:"action-plan mdl-button--icon"});c.appendChild(n("i",{class:"material-icons"},"insights"));c.onclick=()=>{geofs.api.map.clearPath();geofs.api.map.setPathPoints([this.jobMngr.aHandler.getAirportCoords(a.dept),this.jobMngr.aHandler.getAirportCoords(a.dest)]);ui.panel.show(".geofs-map-list")};b=p(b,"button",{class:"action-plan mdl-button--icon"});b.appendChild(n("i",{class:"material-icons"},"airplane_ticket"));b.onclick=()=>{a.status=B.PLANING;this.jobMngr.flight.setCurrent(a);this.jobsWindow.mainMenuDom.querySelector("li:nth-child(2)").click()}})};function E(a){this.window=a;this.jobMngr=a.jobMngr}E.prototype.populate=function(a){this.buttonsDom={resetFlight:a.querySelector("#flight-reset"),cancelFlight:a.querySelector("#flight-cancel"),startFlight:a.querySelector("#flight-start"),finishFlight:a.querySelector("#flight-finish")};this.inputsDom={flight:a.querySelector("#flightplan-flight"),airline:a.querySelector("#flightplan-airline"),dept:a.querySelector("#flightplan-dept"),dest:a.querySelector("#flightplan-dest"),depttime:a.querySelector("#flightplan-depttime"),arrvtime:a.querySelector("#flightplan-arrvtime")};this.displaysDom={depttimeActual:a.querySelector("#flightplan-depttime-actual"),arrvtimeActual:a.querySelector("#flightplan-arrvtime-actual"),speedAvg:a.querySelector("#flightplan-speed-avg"),traveled:a.querySelector("#flightplan-traveled")};this.airlineInfoDom=a.querySelector(".airline-info");this.destInfoDom=a.querySelector(".destination-info");this.destInfoDom.onclick=()=>this.windyPopup();Object.keys(this.inputsDom).forEach(b=>{this.inputsDom[b].onchange=()=>this.handleInputChange(b)});this.buttonsDom.resetFlight.onclick=()=>this.resetFlight();this.buttonsDom.cancelFlight.onclick=()=>this.cancelFlight();this.buttonsDom.startFlight.onclick=()=>this.startFlight();this.buttonsDom.finishFlight.onclick=()=>this.finishFlight();a.onkeydown=a.onkeyup=a.onkeypress=function(b){b.stopImmediatePropagation()}};E.prototype.finishFlight=function(){const a=this.jobMngr.flight.getCurrent();a&&(a.status=B.FINISHED,this.updateForm())};E.prototype.startFlight=function(){const a=this.jobMngr.flight.getCurrent();a&&(a.status=B.DEPARTURE,this.updateForm())};E.prototype.cancelFlight=function(){const a=this.jobMngr.flight.getCurrent();a&&(a.status=B.ABORTED,this.updateForm())};E.prototype.resetFlight=function(){const a=this.jobMngr.flight.getCurrent();a&&a.status==B.PLANING&&(delete a.id,delete a.status);this.jobMngr.flight.setCurrent({status:B.PLANING});this.updateForm()};E.prototype.handleInputChange=function(a){const b=this.jobMngr.flight.getCurrent();b&&(b[a]=this.inputsDom[a].value.toLocaleUpperCase());this.updateForm()};E.prototype.windyPopup=function(){var a=this.jobMngr.flight.getCurrent();a&&a.dest&&(a=this.jobMngr.aHandler.getAirportCoords(a.dest))&&window.open("https://embed.windy.com/embed.html?type=map&location=coordinates&zoom=7&lat="+a[0]+"&lon="+a[1],"_blank","popup=1",!1)};E.prototype.buttonMask=function(a,b,c,d){a?$(this.buttonsDom.resetFlight).show():$(this.buttonsDom.resetFlight).hide();b?$(this.buttonsDom.cancelFlight).show():$(this.buttonsDom.cancelFlight).hide();c?$(this.buttonsDom.startFlight).show():$(this.buttonsDom.startFlight).hide();d?$(this.buttonsDom.finishFlight).show():$(this.buttonsDom.finishFlight).hide()};E.prototype.handleButtonVisibility=function(a){a==B.PLANING&&this.buttonMask(1,0,1,0);a==B.DEPARTURE&&this.buttonMask(0,1,0,1);a==B.AIRBORNE&&this.buttonMask(0,1,0,1);a==B.ARRIVAL&&this.buttonMask(0,1,0,1);a==B.FINISHED&&this.buttonMask(1,0,1,0);a==B.ABORTED&&this.buttonMask(1,0,1,0)};E.prototype.updateForm=function(){var a="flight airline dept dest depttime arrvtime".split(" ");const b=this.jobMngr.flight.getCurrent();if(!b)return a.forEach(c=>{this.inputsDom[c].value=""}),this.inputsDom.flight.setAttribute("placeholder",""),this.airlineInfoDom.innerHTML="",this.destInfoDom.innerHTML="",this.buttonMask(1,0,1,0);this.handleButtonVisibility(b.status);a.forEach(c=>{this.inputsDom[c].value=b[c]||""});b.airline&&b.airline.length?(a=b.airline.toLocaleUpperCase(),this.updateAirlineInfo(a)):(this.airlineInfoDom.innerHTML="",this.inputsDom.flight.setAttribute("placeholder",""));b.dest&&3<b.dest.length?(a=b.dest.toLocaleUpperCase(),this.updateDestinationInfo(a)):this.destInfoDom.innerHTML=""};E.prototype.updateAirlineInfo=function(a){let b=this.inputsDom.flight;if(3==a.length){const c=this.jobMngr.aHandler.getAInfo(a);c?(this.airlineInfoDom.innerHTML=c.name,b.setAttribute("placeholder",c.iata.toLocaleUpperCase()),a=this.jobMngr.aHandler.hasAIcon(c.icao)?`https://www.flightaware.com/images/airline_logos/24px/${a}.png`:"https://raw.githubusercontent.com/scitor/GeoFS/master/randomJobs/airline.png",this.airlineInfoDom.innerHTML+=n("img",{src:a}).outerHTML):b.setAttribute("placeholder","")}else 1==a.length?(b.setAttribute("placeholder",a),this.airlineInfoDom.innerHTML=this.jobMngr.aHandler.getRegionalsName(a),this.airlineInfoDom.innerHTML+=n("img",{src:"https://raw.githubusercontent.com/scitor/GeoFS/master/randomJobs/regional.png"}).outerHTML):b.setAttribute("placeholder","")};E.prototype.updateDestinationInfo=function(a){const b=this.jobMngr.aHandler.getAirportInfo(a);let c=this.jobMngr.aHandler.getAirportName(a),d="";b&&(c=c||b.name,b.country&&(c=n("a",{class:"flag "+b.country.toLowerCase(),title:b.country}).outerHTML+c),b.iata&&(d+=" ("+b.iata+")"),b.city&&(d+=", "+b.city),this.jobMngr.aHandler.fetchAirportWeather(a,e=>{if(e&&e.METAR){let f="";e.altimHg&&(f+=" inHg:"+e.altimHg);e.fltCat&&(f+=" ("+e.fltCat+")");const l=Object.keys(e).map(x=>x+":"+e[x]).join("\n");d+=n("a",{title:l},f).outerHTML;this.destInfoDom.innerHTML=c.replace(" International "," Intl. ").replace(/ Airport$/,"");this.destInfoDom.innerHTML+=n("small",{},d).outerHTML}}));this.destInfoDom.innerHTML=c.replace(" International "," Intl. ").replace(/ Airport$/,"");this.destInfoDom.innerHTML+=n("small",{},d).outerHTML};E.prototype.refreshDisplays=function(){const a=["depttimeActual","arrvtimeActual","speedAvg","traveled"],b=this.jobMngr.flight.getCurrent();if(b&&b.status!=B.PLANING)return a.forEach(c=>{this.displaysDom[c].value=b[c]||""});a.forEach(c=>{this.displaysDom[c].value=""})};let F=1;(function G(){if(!Object.keys(g[0]).length&&5>F)return setTimeout(G,1E3*F++);geofs.randomJobs=new y(g,k,"0.5.0.369");geofs.randomJobs.init(H,()=>(new C(geofs.randomJobs)).init())})();function H(){return{routes:[{active:!1,departure:"LZSH",destination:"LSGG",airline:"ABC"},{active:!1,departure:"LSGG",destination:"LSZH",airline:"ABC"}],airlines:[{active:!1,icao:"ABC",iata:"BC",name:"Airline Bravo Charlie",icon:"https://i.ibb.co/31LBjR6/airline.png"}]}};}).call(this);